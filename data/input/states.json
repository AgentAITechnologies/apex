{
    "name": "root",

    "children": [
            {
                "name": "start",
                "children": [
                    {
                        "name": "select-ready",
                        "system": "You are a helpful agent that controls a desktop PC who takes actions on behalf of the computer's user to complete a task. You have access to a Python interpreter, a shell for the underlying system (PowerShell), the screen (by taking and viewing screenshots), and a mouse and keyboard emulator (via the Python interpreter). You may determine the current state of the system programmatically and/or by viewing a screenshot. A user is now asking you to complete a task on their behalf. The task is: \"{task}\". It is now your job to determine if you need additional information before completing the task, such as asking the user a question to better understand your task or getting more context about the system's current state, or need to configure the system into a specific state to perform the task. Indicate your decision with a JSON object that contains a property \"action\" set to \"notready\" (I need more information or the opportunity to configure the state of the system) or \"ready\" (I am able to perform the task directly by writing a Python script, writing a PowerShell script, emulating mouse and keyboard input, or passing a message to the user). Also include a property \"reason\" that contains the reason why you have made this determination. Do not include any content besides the specified JSON.",
                        "messages": [
                            {
                                "role": "user",
                                "content": [
                                    {
                                        "type": "text",
                                        "text": "Do you need to get any additional information or context from the user or system or do you need to configure the system into a specific state to perform the task \"{task}\"? Why or why not?"
                                    }
                                ]
                            }
                        ],
                        "frmt": {
                            "task": ""
                        }
                    }
                ]
            },
            
            {
                "name": "notready", 
                
                "children": [
            
                    {
                        "name": "select-get-set-state",
            
                        "children": [
            
                                {
                                    "name": "get-state",
            
                                        "children":
                                        [
                                            {
                                                "name": "select-tool",
                                                
                                                "children": [{"name": "compose-question"}, {"name": "compose-python"}, {"name": "compose-powershell"}, {"name": "compose-screenshot"}]
                                            }
                                        ]
                                },
            
                                {
                                    "name": "set-state",
            
                                        "children": [
            
                                            {
                                                "name": "select-tool",
                                                
                                                "children": [{"name": "compose-message"}, {"name": "compose-python"}, {"name": "compose-powershell"}, {"name": "compose-screenshot"}]
                                            }
                                        ]
                                }
                        ]
                    },
                    
                    {"name": "select-ready"}
                ]
            },
            
            {
                "name": "ready",
            
                "children": [
            
                    {
                        "name": "select-tool",

                        "system": "You are a helpful agent that controls a desktop PC who takes actions on behalf of the computer's user to complete a task. You have access to a Python interpreter, a shell for the underlying system, the screen (by taking and viewing screenshots), and a mouse and keyboard emulator (via the Python interpreter). You may determine the current state of the system programmatically and/or by viewing a screenshot. A user is now asking you to complete a task on their behalf. The task is: \"{task}\". {state_history_str} Thus, you can complete the task by writing a Python script, writing a PowerShell script, emulating mouse and keyboard events, or by simply passing a message to the user. You must now choose which action to take. Respond with a JSON object containing a property \"action\" with the value \"python\" if you wish to complete the task using Python, \"powershell\" if you wish to complete the task using PowerShell, \"emulation\" if you wish to complete the task using mouse and keyboard emulation, or \"message\" if you wish to complete the task by passing a message to the user. Include a property \"reason\" that contains the reason you believe this action is most appropriate and efficient. You must only choose the appropriate action, not perform it. Do not include any content besides the specified JSON.",
                        "messages": [
                            {
                                "role": "user",
                                "content": [
                                    {
                                        "type": "text",
                                        "text": "Which action do you want to take to complete the task \"{task}\", and why is this action the best choice?"
                                    }
                                ]
                            }
                        ],
                        "frmt": {
                            "task": "",
                            "state_history_str": "You have determined that you do not need additional information before completing the task, such as asking the user a question to better understand your task or getting more context about the system's current state, and do not need to configure the system into a specific state to perform the task."
                        },
                                    
                        "children": [{"name": "compose-message"}, {"name": "compose-python"}, {"name": "compose-powershell"}, {"name": "compose-screenshot"}]
                    },
                    
                    {"name": "select-done"}
                ]
            },
            
            {"name": "failure-reflection"},
            
            {"name": "done"}
        ]
}
